                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ANSI-C Compiler
                                      3 ; Version 4.0.4 #11952 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module Adventure
                                      6 	.optsdcc -mgbz80
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _ActivateTriggerAt
                                     12 	.globl _ScriptStart
                                     13 	.globl _TileAt
                                     14 	.globl _ActorInFrontOfPlayer
                                     15 	.globl _ActorOverlapsPlayer
                                     16 	.globl _Start_Adventure
                                     17 	.globl _Update_Adventure
                                     18 ;--------------------------------------------------------
                                     19 ; special function registers
                                     20 ;--------------------------------------------------------
                                     21 ;--------------------------------------------------------
                                     22 ; ram data
                                     23 ;--------------------------------------------------------
                                     24 	.area _DATA
                                     25 ;--------------------------------------------------------
                                     26 ; absolute external ram data
                                     27 ;--------------------------------------------------------
                                     28 	.area _DABS (ABS)
                                     29 ;--------------------------------------------------------
                                     30 ; global & static initialisations
                                     31 ;--------------------------------------------------------
                                     32 	.area _HOME
                                     33 	.area _GSINIT
                                     34 	.area _GSFINAL
                                     35 	.area _GSINIT
                                     36 ;--------------------------------------------------------
                                     37 ; Home
                                     38 ;--------------------------------------------------------
                                     39 	.area _HOME
                                     40 	.area _HOME
                                     41 ;--------------------------------------------------------
                                     42 ; code
                                     43 ;--------------------------------------------------------
                                     44 	.area _CODE_5
                                     45 ;/tmp/_gbsbuild/src/states/Adventure.c:16: void Start_Adventure() {
                                     46 ;	---------------------------------
                                     47 ; Function Start_Adventure
                                     48 ; ---------------------------------
      000000                         49 _Start_Adventure::
                                     50 ;/tmp/_gbsbuild/src/states/Adventure.c:18: camera_offset.x = 0;
      000000 21r00r00                51 	ld	hl, #_camera_offset
      000003 36 00                   52 	ld	(hl), #0x00
                                     53 ;/tmp/_gbsbuild/src/states/Adventure.c:19: camera_offset.y = 0;
      000005 21r01r00                54 	ld	hl, #(_camera_offset + 0x0001)
      000008 36 00                   55 	ld	(hl), #0x00
                                     56 ;/tmp/_gbsbuild/src/states/Adventure.c:20: camera_deadzone.x = ADVENTURE_CAMERA_DEADZONE;
      00000A 21r00r00                57 	ld	hl, #_camera_deadzone
      00000D 36 08                   58 	ld	(hl), #0x08
                                     59 ;/tmp/_gbsbuild/src/states/Adventure.c:21: camera_deadzone.y = ADVENTURE_CAMERA_DEADZONE;
      00000F 21r01r00                60 	ld	hl, #(_camera_deadzone + 0x0001)
      000012 36 08                   61 	ld	(hl), #0x08
                                     62 ;/tmp/_gbsbuild/src/states/Adventure.c:22: }
      000014 C9                      63 	ret
                                     64 ;/tmp/_gbsbuild/src/states/Adventure.c:24: void Update_Adventure() {
                                     65 ;	---------------------------------
                                     66 ; Function Update_Adventure
                                     67 ; ---------------------------------
      000015                         68 _Update_Adventure::
      000015 E8 F3                   69 	add	sp, #-13
                                     70 ;/tmp/_gbsbuild/src/states/Adventure.c:30: player.moving = FALSE;
      000017 21r07r00                71 	ld	hl, #(_actors + 0x0007)
      00001A 36 00                   72 	ld	(hl), #0x00
                                     73 ;/tmp/_gbsbuild/src/states/Adventure.c:34: if (INPUT_LEFT) {
      00001C 21r00r00                74 	ld	hl, #_joy
      00001F 5E                      75 	ld	e, (hl)
                                     76 ;/tmp/_gbsbuild/src/states/Adventure.c:35: player.dir.x = -1;
                                     77 ;/tmp/_gbsbuild/src/states/Adventure.c:37: player.rerender = TRUE;
      000020 01r14r00                78 	ld	bc, #_actors + 20
                                     79 ;/tmp/_gbsbuild/src/states/Adventure.c:34: if (INPUT_LEFT) {
      000023 FAr00r00                80 	ld	a, (#_ui_block)
      000026 B7                      81 	or	a, a
      000027 20 07                   82 	jr	NZ, 00109$
      000029 21r00r00                83 	ld	hl, #_input_override_default
      00002C CB 4E                   84 	bit	1, (hl)
      00002E 20 12                   85 	jr	NZ, 00106$
      000030                         86 00109$:
      000030 CB 4B                   87 	bit	1, e
      000032 28 0E                   88 	jr	Z, 00106$
                                     89 ;/tmp/_gbsbuild/src/states/Adventure.c:35: player.dir.x = -1;
      000034 21r05r00                90 	ld	hl, #(_actors + 0x0005)
      000037 36 FF                   91 	ld	(hl), #0xff
                                     92 ;/tmp/_gbsbuild/src/states/Adventure.c:36: player.moving = TRUE;
      000039 21r07r00                93 	ld	hl, #(_actors + 0x0007)
                                     94 ;/tmp/_gbsbuild/src/states/Adventure.c:37: player.rerender = TRUE;
      00003C 3E 01                   95 	ld	a,#0x01
      00003E 77                      96 	ld	(hl),a
      00003F 02                      97 	ld	(bc), a
      000040 18 1D                   98 	jr	00107$
      000042                         99 00106$:
                                    100 ;/tmp/_gbsbuild/src/states/Adventure.c:38: } else if (INPUT_RIGHT) {
      000042 FAr00r00               101 	ld	a, (#_ui_block)
      000045 B7                     102 	or	a, a
      000046 20 07                  103 	jr	NZ, 00104$
      000048 21r00r00               104 	ld	hl, #_input_override_default
      00004B CB 46                  105 	bit	0, (hl)
      00004D 20 10                  106 	jr	NZ, 00107$
      00004F                        107 00104$:
      00004F CB 43                  108 	bit	0, e
      000051 28 0C                  109 	jr	Z, 00107$
                                    110 ;/tmp/_gbsbuild/src/states/Adventure.c:39: player.dir.x = 1;
      000053 21r05r00               111 	ld	hl, #(_actors + 0x0005)
      000056 36 01                  112 	ld	(hl), #0x01
                                    113 ;/tmp/_gbsbuild/src/states/Adventure.c:40: player.moving = TRUE;
      000058 21r07r00               114 	ld	hl, #(_actors + 0x0007)
                                    115 ;/tmp/_gbsbuild/src/states/Adventure.c:41: player.rerender = TRUE;
      00005B 3E 01                  116 	ld	a,#0x01
      00005D 77                     117 	ld	(hl),a
      00005E 02                     118 	ld	(bc), a
      00005F                        119 00107$:
                                    120 ;/tmp/_gbsbuild/src/states/Adventure.c:34: if (INPUT_LEFT) {
      00005F 21r00r00               121 	ld	hl, #_joy
      000062 5E                     122 	ld	e, (hl)
                                    123 ;/tmp/_gbsbuild/src/states/Adventure.c:46: player.dir.y = -1;
                                    124 ;/tmp/_gbsbuild/src/states/Adventure.c:45: if (INPUT_UP) {
      000063 FAr00r00               125 	ld	a, (#_ui_block)
      000066 B7                     126 	or	a, a
      000067 20 07                  127 	jr	NZ, 00118$
      000069 21r00r00               128 	ld	hl, #_input_override_default
      00006C CB 56                  129 	bit	2, (hl)
      00006E 20 12                  130 	jr	NZ, 00115$
      000070                        131 00118$:
      000070 CB 53                  132 	bit	2, e
      000072 28 0E                  133 	jr	Z, 00115$
                                    134 ;/tmp/_gbsbuild/src/states/Adventure.c:46: player.dir.y = -1;
      000074 21r06r00               135 	ld	hl, #(_actors + 0x0006)
      000077 36 FF                  136 	ld	(hl), #0xff
                                    137 ;/tmp/_gbsbuild/src/states/Adventure.c:47: player.moving = TRUE;
      000079 21r07r00               138 	ld	hl, #(_actors + 0x0007)
                                    139 ;/tmp/_gbsbuild/src/states/Adventure.c:48: player.rerender = TRUE;
      00007C 3E 01                  140 	ld	a,#0x01
      00007E 77                     141 	ld	(hl),a
      00007F 02                     142 	ld	(bc), a
      000080 18 1D                  143 	jr	00116$
      000082                        144 00115$:
                                    145 ;/tmp/_gbsbuild/src/states/Adventure.c:49: } else if (INPUT_DOWN) {
      000082 FAr00r00               146 	ld	a, (#_ui_block)
      000085 B7                     147 	or	a, a
      000086 20 07                  148 	jr	NZ, 00113$
      000088 21r00r00               149 	ld	hl, #_input_override_default
      00008B CB 5E                  150 	bit	3, (hl)
      00008D 20 10                  151 	jr	NZ, 00116$
      00008F                        152 00113$:
      00008F CB 5B                  153 	bit	3, e
      000091 28 0C                  154 	jr	Z, 00116$
                                    155 ;/tmp/_gbsbuild/src/states/Adventure.c:50: player.dir.y = 1;
      000093 21r06r00               156 	ld	hl, #(_actors + 0x0006)
      000096 36 01                  157 	ld	(hl), #0x01
                                    158 ;/tmp/_gbsbuild/src/states/Adventure.c:51: player.moving = TRUE;
      000098 21r07r00               159 	ld	hl, #(_actors + 0x0007)
                                    160 ;/tmp/_gbsbuild/src/states/Adventure.c:52: player.rerender = TRUE;
      00009B 3E 01                  161 	ld	a,#0x01
      00009D 77                     162 	ld	(hl),a
      00009E 02                     163 	ld	(bc), a
      00009F                        164 00116$:
                                    165 ;/tmp/_gbsbuild/src/states/Adventure.c:34: if (INPUT_LEFT) {
      00009F FAr00r00               166 	ld	a, (#_input_override_default)
      0000A2 E6 02                  167 	and	a, #0x02
      0000A4 F8 05                  168 	ldhl	sp,	#5
      0000A6 77                     169 	ld	(hl), a
      0000A7 21r00r00               170 	ld	hl, #_joy
      0000AA 5E                     171 	ld	e, (hl)
                                    172 ;/tmp/_gbsbuild/src/states/Adventure.c:38: } else if (INPUT_RIGHT) {
      0000AB FAr00r00               173 	ld	a, (#_input_override_default)
      0000AE E6 01                  174 	and	a, #0x01
      0000B0 F8 06                  175 	ldhl	sp,	#6
      0000B2 77                     176 	ld	(hl), a
                                    177 ;/tmp/_gbsbuild/src/states/Adventure.c:45: if (INPUT_UP) {
      0000B3 FAr00r00               178 	ld	a, (#_input_override_default)
      0000B6 E6 04                  179 	and	a, #0x04
      0000B8 F8 07                  180 	ldhl	sp,	#7
      0000BA 77                     181 	ld	(hl), a
                                    182 ;/tmp/_gbsbuild/src/states/Adventure.c:49: } else if (INPUT_DOWN) {
      0000BB FAr00r00               183 	ld	a, (#_input_override_default)
      0000BE E6 08                  184 	and	a, #0x08
      0000C0 F8 08                  185 	ldhl	sp,	#8
      0000C2 77                     186 	ld	(hl), a
                                    187 ;/tmp/_gbsbuild/src/states/Adventure.c:34: if (INPUT_LEFT) {
      0000C3 7B                     188 	ld	a, e
      0000C4 E6 02                  189 	and	a, #0x02
      0000C6 4F                     190 	ld	c, a
      0000C7 06 00                  191 	ld	b, #0x00
                                    192 ;/tmp/_gbsbuild/src/states/Adventure.c:38: } else if (INPUT_RIGHT) {
      0000C9 7B                     193 	ld	a, e
      0000CA E6 01                  194 	and	a, #0x01
      0000CC 23                     195 	inc	hl
      0000CD 77                     196 	ld	(hl), a
      0000CE AF                     197 	xor	a, a
      0000CF 23                     198 	inc	hl
      0000D0 77                     199 	ld	(hl), a
                                    200 ;/tmp/_gbsbuild/src/states/Adventure.c:45: if (INPUT_UP) {
      0000D1 7B                     201 	ld	a, e
      0000D2 E6 04                  202 	and	a, #0x04
      0000D4 23                     203 	inc	hl
      0000D5 77                     204 	ld	(hl), a
      0000D6 AF                     205 	xor	a, a
      0000D7 23                     206 	inc	hl
      0000D8 77                     207 	ld	(hl), a
                                    208 ;/tmp/_gbsbuild/src/states/Adventure.c:49: } else if (INPUT_DOWN) {
      0000D9 7B                     209 	ld	a, e
      0000DA E6 08                  210 	and	a, #0x08
      0000DC 5F                     211 	ld	e, a
      0000DD 16 00                  212 	ld	d, #0x00
                                    213 ;/tmp/_gbsbuild/src/states/Adventure.c:55: if ((INPUT_LEFT || INPUT_RIGHT) && !INPUT_UP && !INPUT_DOWN) {
      0000DF FAr00r00               214 	ld	a, (#_ui_block)
      0000E2 B7                     215 	or	a, a
      0000E3 20 06                  216 	jr	NZ, 00136$
      0000E5 F8 05                  217 	ldhl	sp,	#5
      0000E7 7E                     218 	ld	a, (hl)
      0000E8 B7                     219 	or	a, a
      0000E9 20 04                  220 	jr	NZ, 00139$
      0000EB                        221 00136$:
      0000EB 78                     222 	ld	a, b
      0000EC B1                     223 	or	a, c
      0000ED 20 12                  224 	jr	NZ, 00142$
      0000EF                        225 00139$:
      0000EF FAr00r00               226 	ld	a, (#_ui_block)
      0000F2 B7                     227 	or	a, a
      0000F3 20 06                  228 	jr	NZ, 00138$
      0000F5 F8 06                  229 	ldhl	sp,	#6
      0000F7 7E                     230 	ld	a, (hl)
      0000F8 B7                     231 	or	a, a
      0000F9 20 2F                  232 	jr	NZ, 00133$
      0000FB                        233 00138$:
      0000FB F8 0A                  234 	ldhl	sp,	#10
      0000FD 3A                     235 	ld	a, (hl-)
      0000FE B6                     236 	or	a, (hl)
      0000FF 28 29                  237 	jr	Z, 00133$
      000101                        238 00142$:
      000101 FAr00r00               239 	ld	a, (#_ui_block)
      000104 B7                     240 	or	a, a
      000105 20 06                  241 	jr	NZ, 00141$
      000107 F8 07                  242 	ldhl	sp,	#7
      000109 7E                     243 	ld	a, (hl)
      00010A B7                     244 	or	a, a
      00010B 20 06                  245 	jr	NZ, 00145$
      00010D                        246 00141$:
      00010D F8 0C                  247 	ldhl	sp,	#12
      00010F 3A                     248 	ld	a, (hl-)
      000110 B6                     249 	or	a, (hl)
      000111 20 17                  250 	jr	NZ, 00133$
      000113                        251 00145$:
      000113 FAr00r00               252 	ld	a, (#_ui_block)
      000116 B7                     253 	or	a, a
      000117 20 06                  254 	jr	NZ, 00144$
      000119 F8 08                  255 	ldhl	sp,	#8
      00011B 7E                     256 	ld	a, (hl)
      00011C B7                     257 	or	a, a
      00011D 20 04                  258 	jr	NZ, 00132$
      00011F                        259 00144$:
      00011F 7A                     260 	ld	a, d
      000120 B3                     261 	or	a, e
      000121 20 07                  262 	jr	NZ, 00133$
      000123                        263 00132$:
                                    264 ;/tmp/_gbsbuild/src/states/Adventure.c:56: player.dir.y = 0;
      000123 21r06r00               265 	ld	hl, #(_actors + 0x0006)
      000126 36 00                  266 	ld	(hl), #0x00
      000128 18 49                  267 	jr	00134$
      00012A                        268 00133$:
                                    269 ;/tmp/_gbsbuild/src/states/Adventure.c:57: } else if ((INPUT_UP || INPUT_DOWN) && !INPUT_LEFT && !INPUT_RIGHT) {
      00012A FAr00r00               270 	ld	a, (#_ui_block)
      00012D B7                     271 	or	a, a
      00012E 20 06                  272 	jr	NZ, 00122$
      000130 F8 07                  273 	ldhl	sp,	#7
      000132 7E                     274 	ld	a, (hl)
      000133 B7                     275 	or	a, a
      000134 20 06                  276 	jr	NZ, 00125$
      000136                        277 00122$:
      000136 F8 0C                  278 	ldhl	sp,	#12
      000138 3A                     279 	ld	a, (hl-)
      000139 B6                     280 	or	a, (hl)
      00013A 20 10                  281 	jr	NZ, 00128$
      00013C                        282 00125$:
      00013C FAr00r00               283 	ld	a, (#_ui_block)
      00013F B7                     284 	or	a, a
      000140 20 06                  285 	jr	NZ, 00124$
      000142 F8 08                  286 	ldhl	sp,	#8
      000144 7E                     287 	ld	a, (hl)
      000145 B7                     288 	or	a, a
      000146 20 2B                  289 	jr	NZ, 00134$
      000148                        290 00124$:
      000148 7A                     291 	ld	a, d
      000149 B3                     292 	or	a, e
      00014A 28 27                  293 	jr	Z, 00134$
      00014C                        294 00128$:
      00014C FAr00r00               295 	ld	a, (#_ui_block)
      00014F B7                     296 	or	a, a
      000150 20 06                  297 	jr	NZ, 00127$
      000152 F8 05                  298 	ldhl	sp,	#5
      000154 7E                     299 	ld	a, (hl)
      000155 B7                     300 	or	a, a
      000156 20 04                  301 	jr	NZ, 00131$
      000158                        302 00127$:
      000158 78                     303 	ld	a, b
      000159 B1                     304 	or	a, c
      00015A 20 17                  305 	jr	NZ, 00134$
      00015C                        306 00131$:
      00015C FAr00r00               307 	ld	a, (#_ui_block)
      00015F B7                     308 	or	a, a
      000160 20 06                  309 	jr	NZ, 00130$
      000162 F8 06                  310 	ldhl	sp,	#6
      000164 7E                     311 	ld	a, (hl)
      000165 B7                     312 	or	a, a
      000166 20 06                  313 	jr	NZ, 00119$
      000168                        314 00130$:
      000168 F8 0A                  315 	ldhl	sp,	#10
      00016A 3A                     316 	ld	a, (hl-)
      00016B B6                     317 	or	a, (hl)
      00016C 20 05                  318 	jr	NZ, 00134$
      00016E                        319 00119$:
                                    320 ;/tmp/_gbsbuild/src/states/Adventure.c:58: player.dir.x = 0;
      00016E 21r05r00               321 	ld	hl, #(_actors + 0x0005)
      000171 36 00                  322 	ld	(hl), #0x00
      000173                        323 00134$:
                                    324 ;/tmp/_gbsbuild/src/states/Adventure.c:61: backup_dir.x = player.dir.x;
      000173 F8 02                  325 	ldhl	sp,	#2
      000175 4D                     326 	ld	c, l
      000176 44                     327 	ld	b, h
      000177 FAr05r00               328 	ld	a, (#(_actors + 0x0005) + 0)
      00017A 02                     329 	ld	(bc), a
                                    330 ;/tmp/_gbsbuild/src/states/Adventure.c:62: backup_dir.y = player.dir.y;
      00017B F8 02                  331 	ldhl	sp,	#2
      00017D 7D                     332 	ld	a, l
      00017E 54                     333 	ld	d, h
      00017F F8 04                  334 	ldhl	sp,	#4
      000181 22                     335 	ld	(hl+), a
                                    336 ;c
      000182 7A                     337 	ld	a, d
      000183 32                     338 	ld	(hl-), a
      000184 2A                     339 	ld	a, (hl+)
      000185 5F                     340 	ld	e, a
      000186 56                     341 	ld	d, (hl)
      000187 6B                     342 	ld	l, e
      000188 62                     343 	ld	h, d
      000189 23                     344 	inc	hl
      00018A E5                     345 	push	hl
      00018B 7D                     346 	ld	a, l
      00018C F8 08                  347 	ldhl	sp,	#8
      00018E 77                     348 	ld	(hl), a
      00018F E1                     349 	pop	hl
      000190 7C                     350 	ld	a, h
      000191 F8 07                  351 	ldhl	sp,	#7
      000193 77                     352 	ld	(hl), a
      000194 21r06r00               353 	ld	hl, #(_actors + 0x0006)
      000197 4E                     354 	ld	c, (hl)
      000198 F8 06                  355 	ldhl	sp,	#6
      00019A 2A                     356 	ld	a, (hl+)
      00019B 66                     357 	ld	h, (hl)
      00019C 6F                     358 	ld	l, a
      00019D 71                     359 	ld	(hl), c
                                    360 ;/tmp/_gbsbuild/src/states/Adventure.c:64: tile_x = (player.pos.x + 4 + player.dir.x) >> 3;  // Add Left right Bias for Moving=True
      00019E 21r00r00               361 	ld	hl, #_actors
      0001A1 2A                     362 	ld	a, (hl+)
      0001A2 4F                     363 	ld	c, a
      0001A3 46                     364 	ld	b, (hl)
      0001A4 03                     365 	inc	bc
      0001A5 03                     366 	inc	bc
      0001A6 03                     367 	inc	bc
      0001A7 03                     368 	inc	bc
      0001A8 FAr05r00               369 	ld	a, (#(_actors + 0x0005) + 0)
      0001AB 6F                     370 	ld	l, a
      0001AC 17                     371 	rla
      0001AD 9F                     372 	sbc	a, a
      0001AE 67                     373 	ld	h, a
      0001AF 09                     374 	add	hl, bc
      0001B0 4D                     375 	ld	c, l
      0001B1 44                     376 	ld	b, h
      0001B2 33                     377 	inc	sp
      0001B3 33                     378 	inc	sp
      0001B4 C5                     379 	push	bc
      0001B5 F8 01                  380 	ldhl	sp,	#1
      0001B7 CB 2E                  381 	sra	(hl)
      0001B9 2B                     382 	dec	hl
      0001BA CB 1E                  383 	rr	(hl)
      0001BC 23                     384 	inc	hl
      0001BD CB 2E                  385 	sra	(hl)
      0001BF 2B                     386 	dec	hl
      0001C0 CB 1E                  387 	rr	(hl)
      0001C2 23                     388 	inc	hl
      0001C3 CB 2E                  389 	sra	(hl)
      0001C5 2B                     390 	dec	hl
      0001C6 CB 1E                  391 	rr	(hl)
                                    392 ;/tmp/_gbsbuild/src/states/Adventure.c:65: tile_y = (player.pos.y + 7) >> 3;
      0001C8 21r02r00               393 	ld	hl, #(_actors + 0x0002)
      0001CB 2A                     394 	ld	a, (hl+)
      0001CC 4F                     395 	ld	c, a
      0001CD 46                     396 	ld	b, (hl)
      0001CE 21 07 00               397 	ld	hl, #0x0007
      0001D1 09                     398 	add	hl, bc
      0001D2 4D                     399 	ld	c, l
      0001D3 44                     400 	ld	b, h
      0001D4 CB 28                  401 	sra	b
      0001D6 CB 19                  402 	rr	c
      0001D8 CB 28                  403 	sra	b
      0001DA CB 19                  404 	rr	c
      0001DC CB 28                  405 	sra	b
      0001DE CB 19                  406 	rr	c
                                    407 ;/tmp/_gbsbuild/src/states/Adventure.c:67: if (INPUT_A_PRESSED) {
      0001E0 FAr00r00               408 	ld	a, (#_ui_block)
      0001E3 B7                     409 	or	a, a
      0001E4 20 07                  410 	jr	NZ, 00152$
      0001E6 21r00r00               411 	ld	hl, #_input_override_default
      0001E9 CB 66                  412 	bit	4, (hl)
      0001EB 20 3B                  413 	jr	NZ, 00149$
      0001ED                        414 00152$:
      0001ED FAr00r00               415 	ld	a, (#_joy)
      0001F0 CB 67                  416 	bit	4, a
      0001F2 28 34                  417 	jr	Z, 00149$
      0001F4 FAr00r00               418 	ld	a, (#_last_joy)
      0001F7 CB 67                  419 	bit	4, a
      0001F9 20 2D                  420 	jr	NZ, 00149$
                                    421 ;/tmp/_gbsbuild/src/states/Adventure.c:68: hit_actor = ActorInFrontOfPlayer(8, TRUE);
      0001FB C5                     422 	push	bc
      0001FC 11 08 01               423 	ld	de, #0x0108
      0001FF D5                     424 	push	de
      000200 CDr00r00               425 	call	_ActorInFrontOfPlayer
      000203 E8 02                  426 	add	sp, #2
      000205 7B                     427 	ld	a, e
      000206 C1                     428 	pop	bc
                                    429 ;/tmp/_gbsbuild/src/states/Adventure.c:69: if (hit_actor != NO_ACTOR_COLLISON) {
      000207 FE FF                  430 	cp	a, #0xff
      000209 28 1D                  431 	jr	Z, 00149$
                                    432 ;/tmp/_gbsbuild/src/states/Adventure.c:70: ScriptStart(&actors[hit_actor].events_ptr);
      00020B 5F                     433 	ld	e, a
      00020C 16 00                  434 	ld	d, #0x00
      00020E 6B                     435 	ld	l, e
      00020F 62                     436 	ld	h, d
      000210 29                     437 	add	hl, hl
      000211 29                     438 	add	hl, hl
      000212 19                     439 	add	hl, de
      000213 29                     440 	add	hl, hl
      000214 19                     441 	add	hl, de
      000215 29                     442 	add	hl, hl
      000216 19                     443 	add	hl, de
      000217 29                     444 	add	hl, hl
      000218 11r00r00               445 	ld	de, #_actors
      00021B 19                     446 	add	hl, de
      00021C 11 1E 00               447 	ld	de, #0x001e
      00021F 19                     448 	add	hl, de
      000220 C5                     449 	push	bc
      000221 E5                     450 	push	hl
      000222 CDr00r00               451 	call	_ScriptStart
      000225 E8 02                  452 	add	sp, #2
      000227 C1                     453 	pop	bc
      000228                        454 00149$:
                                    455 ;/tmp/_gbsbuild/src/states/Adventure.c:75: if (player.dir.x < 0) {
      000228 FAr05r00               456 	ld	a, (#(_actors + 0x0005) + 0)
      00022B F8 09                  457 	ldhl	sp,	#9
      00022D 77                     458 	ld	(hl), a
                                    459 ;/tmp/_gbsbuild/src/states/Adventure.c:76: if (TileAt(tile_x, tile_y)) {
      00022E F8 0A                  460 	ldhl	sp,	#10
      000230 71                     461 	ld	(hl), c
                                    462 ;/tmp/_gbsbuild/src/states/Adventure.c:77: player.pos.x = (tile_x << 3) + 4;
      000231 F8 00                  463 	ldhl	sp,	#0
      000233 7E                     464 	ld	a, (hl)
      000234 F8 0B                  465 	ldhl	sp,	#11
      000236 77                     466 	ld	(hl), a
      000237 F8 01                  467 	ldhl	sp,	#1
      000239 7E                     468 	ld	a, (hl)
      00023A F8 0C                  469 	ldhl	sp,	#12
      00023C 77                     470 	ld	(hl), a
      00023D 3E 03                  471 	ld	a, #0x03
      00023F                        472 00425$:
      00023F F8 0B                  473 	ldhl	sp,	#11
      000241 CB 26                  474 	sla	(hl)
      000243 23                     475 	inc	hl
      000244 CB 16                  476 	rl	(hl)
      000246 3D                     477 	dec	a
      000247 20 F6                  478 	jr	NZ, 00425$
                                    479 ;/tmp/_gbsbuild/src/states/Adventure.c:75: if (player.dir.x < 0) {
      000249 F8 09                  480 	ldhl	sp,	#9
      00024B CB 7E                  481 	bit	7, (hl)
      00024D 28 4B                  482 	jr	Z, 00159$
                                    483 ;/tmp/_gbsbuild/src/states/Adventure.c:76: if (TileAt(tile_x, tile_y)) {
      00024F F8 00                  484 	ldhl	sp,	#0
      000251 4E                     485 	ld	c, (hl)
      000252 C5                     486 	push	bc
      000253 F8 0C                  487 	ldhl	sp,	#12
      000255 46                     488 	ld	b, (hl)
      000256 C5                     489 	push	bc
      000257 CDr00r00               490 	call	_TileAt
      00025A E8 02                  491 	add	sp, #2
      00025C 7B                     492 	ld	a, e
      00025D C1                     493 	pop	bc
      00025E B7                     494 	or	a, a
      00025F 28 18                  495 	jr	Z, 00156$
                                    496 ;/tmp/_gbsbuild/src/states/Adventure.c:77: player.pos.x = (tile_x << 3) + 4;
                                    497 ;c
      000261 F8 0B                  498 	ldhl	sp,#11
      000263 2A                     499 	ld	a, (hl+)
      000264 5F                     500 	ld	e, a
      000265 56                     501 	ld	d, (hl)
      000266 21 04 00               502 	ld	hl, #0x0004
      000269 19                     503 	add	hl, de
      00026A 4D                     504 	ld	c, l
      00026B 44                     505 	ld	b, h
      00026C 21r00r00               506 	ld	hl, #_actors
      00026F 79                     507 	ld	a, c
      000270 22                     508 	ld	(hl+), a
      000271 70                     509 	ld	(hl), b
                                    510 ;/tmp/_gbsbuild/src/states/Adventure.c:78: player.dir.x = 0;
      000272 21r05r00               511 	ld	hl, #(_actors + 0x0005)
      000275 36 00                  512 	ld	(hl), #0x00
      000277 18 21                  513 	jr	00159$
      000279                        514 00156$:
                                    515 ;/tmp/_gbsbuild/src/states/Adventure.c:79: } else if (TileAt(tile_x, (player.pos.y) >> 3)) {
      000279 21r02r00               516 	ld	hl, #(_actors + 0x0002)
      00027C 2A                     517 	ld	a, (hl+)
      00027D 47                     518 	ld	b, a
      00027E 6E                     519 	ld	l, (hl)
      00027F CB 2D                  520 	sra	l
      000281 CB 18                  521 	rr	b
      000283 CB 2D                  522 	sra	l
      000285 CB 18                  523 	rr	b
      000287 CB 2D                  524 	sra	l
      000289 CB 18                  525 	rr	b
      00028B C5                     526 	push	bc
      00028C CDr00r00               527 	call	_TileAt
      00028F E8 02                  528 	add	sp, #2
      000291 7B                     529 	ld	a, e
      000292 B7                     530 	or	a, a
      000293 28 05                  531 	jr	Z, 00159$
                                    532 ;/tmp/_gbsbuild/src/states/Adventure.c:80: player.dir.y = 1;
      000295 21r06r00               533 	ld	hl, #(_actors + 0x0006)
      000298 36 01                  534 	ld	(hl), #0x01
      00029A                        535 00159$:
                                    536 ;/tmp/_gbsbuild/src/states/Adventure.c:85: if (player.dir.x > 0) {
      00029A 21r05r00               537 	ld	hl, #(_actors + 0x0005)
      00029D 4E                     538 	ld	c, (hl)
      00029E 59                     539 	ld	e, c
      00029F 16 00                  540 	ld	d, #0x00
      0002A1 AF                     541 	xor	a, a
      0002A2 91                     542 	sub	a, c
      0002A3 CB 7B                  543 	bit	7, e
      0002A5 28 07                  544 	jr	Z, 00426$
      0002A7 CB 7A                  545 	bit	7, d
      0002A9 20 08                  546 	jr	NZ, 00427$
      0002AB BF                     547 	cp	a, a
      0002AC 18 05                  548 	jr	00427$
      0002AE                        549 00426$:
      0002AE CB 7A                  550 	bit	7, d
      0002B0 28 01                  551 	jr	Z, 00427$
      0002B2 37                     552 	scf
      0002B3                        553 00427$:
      0002B3 30 56                  554 	jr	NC, 00166$
                                    555 ;/tmp/_gbsbuild/src/states/Adventure.c:86: if (TileAt(tile_x + 1, tile_y)) {
      0002B5 F8 00                  556 	ldhl	sp,	#0
      0002B7 46                     557 	ld	b, (hl)
      0002B8 04                     558 	inc	b
      0002B9 C5                     559 	push	bc
      0002BA F8 0C                  560 	ldhl	sp,	#12
      0002BC 7E                     561 	ld	a, (hl)
      0002BD F5                     562 	push	af
      0002BE 33                     563 	inc	sp
      0002BF C5                     564 	push	bc
      0002C0 33                     565 	inc	sp
      0002C1 CDr00r00               566 	call	_TileAt
      0002C4 E8 02                  567 	add	sp, #2
      0002C6 7B                     568 	ld	a, e
      0002C7 C1                     569 	pop	bc
      0002C8 B7                     570 	or	a, a
      0002C9 28 1B                  571 	jr	Z, 00163$
                                    572 ;/tmp/_gbsbuild/src/states/Adventure.c:87: player.pos.x = (tile_x << 3) - 5;
      0002CB F8 0B                  573 	ldhl	sp,#11
      0002CD 2A                     574 	ld	a, (hl+)
      0002CE 5F                     575 	ld	e, a
      0002CF 56                     576 	ld	d, (hl)
      0002D0 21 05 00               577 	ld	hl, #0x0005
      0002D3 7B                     578 	ld	a, e
      0002D4 95                     579 	sub	a, l
      0002D5 5F                     580 	ld	e, a
      0002D6 7A                     581 	ld	a, d
      0002D7 9C                     582 	sbc	a, h
      0002D8 47                     583 	ld	b, a
      0002D9 7B                     584 	ld	a, e
      0002DA 21r00r00               585 	ld	hl, #_actors
      0002DD 22                     586 	ld	(hl+), a
      0002DE 70                     587 	ld	(hl), b
                                    588 ;/tmp/_gbsbuild/src/states/Adventure.c:88: player.dir.x = 0;
      0002DF 21r05r00               589 	ld	hl, #(_actors + 0x0005)
      0002E2 36 00                  590 	ld	(hl), #0x00
      0002E4 18 25                  591 	jr	00166$
      0002E6                        592 00163$:
                                    593 ;/tmp/_gbsbuild/src/states/Adventure.c:89: } else if (TileAt(tile_x + 1, (player.pos.y) >> 3)) {
      0002E6 21r02r00               594 	ld	hl, #(_actors + 0x0002)
      0002E9 2A                     595 	ld	a, (hl+)
      0002EA 66                     596 	ld	h, (hl)
      0002EB 6F                     597 	ld	l, a
      0002EC CB 2C                  598 	sra	h
      0002EE CB 1D                  599 	rr	l
      0002F0 CB 2C                  600 	sra	h
      0002F2 CB 1D                  601 	rr	l
      0002F4 CB 2C                  602 	sra	h
      0002F6 CB 1D                  603 	rr	l
      0002F8 7D                     604 	ld	a, l
      0002F9 F5                     605 	push	af
      0002FA 33                     606 	inc	sp
      0002FB C5                     607 	push	bc
      0002FC 33                     608 	inc	sp
      0002FD CDr00r00               609 	call	_TileAt
      000300 E8 02                  610 	add	sp, #2
      000302 7B                     611 	ld	a, e
      000303 B7                     612 	or	a, a
      000304 28 05                  613 	jr	Z, 00166$
                                    614 ;/tmp/_gbsbuild/src/states/Adventure.c:90: player.dir.y = 1;
      000306 21r06r00               615 	ld	hl, #(_actors + 0x0006)
      000309 36 01                  616 	ld	(hl), #0x01
      00030B                        617 00166$:
                                    618 ;/tmp/_gbsbuild/src/states/Adventure.c:94: tile_x = (player.pos.x + 4 - player.dir.x) >> 3;  // Remove LeftRight Bias to not stick
      00030B 21r00r00               619 	ld	hl, #_actors
      00030E 2A                     620 	ld	a, (hl+)
      00030F 4F                     621 	ld	c, a
      000310 46                     622 	ld	b, (hl)
      000311 03                     623 	inc	bc
      000312 03                     624 	inc	bc
      000313 03                     625 	inc	bc
      000314 03                     626 	inc	bc
      000315 FAr05r00               627 	ld	a, (#(_actors + 0x0005) + 0)
      000318 5F                     628 	ld	e, a
      000319 17                     629 	rla
      00031A 9F                     630 	sbc	a, a
      00031B 57                     631 	ld	d, a
      00031C 79                     632 	ld	a, c
      00031D 93                     633 	sub	a, e
      00031E 4F                     634 	ld	c, a
      00031F 78                     635 	ld	a, b
      000320 9A                     636 	sbc	a, d
      000321 47                     637 	ld	b, a
      000322 CB 28                  638 	sra	b
      000324 CB 19                  639 	rr	c
      000326 CB 28                  640 	sra	b
      000328 CB 19                  641 	rr	c
      00032A CB 28                  642 	sra	b
      00032C CB 19                  643 	rr	c
                                    644 ;/tmp/_gbsbuild/src/states/Adventure.c:95: tile_y = (player.pos.y + player.dir.y) >> 3;
      00032E 11r02r00               645 	ld	de, #(_actors + 0x0002)
      000331 1A                     646 	ld	a, (de)
      000332 F8 0B                  647 	ldhl	sp,	#11
      000334 22                     648 	ld	(hl+), a
      000335 13                     649 	inc	de
      000336 1A                     650 	ld	a, (de)
      000337 77                     651 	ld	(hl), a
                                    652 ;/tmp/_gbsbuild/src/states/Adventure.c:62: backup_dir.y = player.dir.y;
      000338 FAr06r00               653 	ld	a, (#(_actors + 0x0006) + 0)
      00033B F8 08                  654 	ldhl	sp,	#8
      00033D 77                     655 	ld	(hl), a
                                    656 ;/tmp/_gbsbuild/src/states/Adventure.c:95: tile_y = (player.pos.y + player.dir.y) >> 3;
      00033E F8 08                  657 	ldhl	sp,	#8
      000340 7E                     658 	ld	a, (hl)
      000341 5F                     659 	ld	e, a
      000342 17                     660 	rla
      000343 9F                     661 	sbc	a, a
      000344 57                     662 	ld	d, a
                                    663 ;c
      000345 F8 0B                  664 	ldhl	sp,	#11
      000347 2A                     665 	ld	a, (hl+)
      000348 66                     666 	ld	h, (hl)
      000349 6F                     667 	ld	l, a
      00034A 19                     668 	add	hl, de
      00034B 5D                     669 	ld	e, l
      00034C 54                     670 	ld	d, h
      00034D F8 09                  671 	ldhl	sp,	#9
      00034F 7B                     672 	ld	a, e
      000350 22                     673 	ld	(hl+), a
      000351 72                     674 	ld	(hl), d
      000352 CB 2E                  675 	sra	(hl)
      000354 2B                     676 	dec	hl
      000355 CB 1E                  677 	rr	(hl)
      000357 23                     678 	inc	hl
      000358 CB 2E                  679 	sra	(hl)
      00035A 2B                     680 	dec	hl
      00035B CB 1E                  681 	rr	(hl)
      00035D 23                     682 	inc	hl
      00035E CB 2E                  683 	sra	(hl)
      000360 2B                     684 	dec	hl
      000361 CB 1E                  685 	rr	(hl)
                                    686 ;/tmp/_gbsbuild/src/states/Adventure.c:76: if (TileAt(tile_x, tile_y)) {
      000363 23                     687 	inc	hl
      000364 23                     688 	inc	hl
                                    689 ;/tmp/_gbsbuild/src/states/Adventure.c:86: if (TileAt(tile_x + 1, tile_y)) {
      000365 79                     690 	ld	a,c
      000366 77                     691 	ld	(hl),a
                                    692 ;/tmp/_gbsbuild/src/states/Adventure.c:100: (TileAt(tile_x + 1, tile_y))  // Right edge
      000367 3C                     693 	inc	a
      000368 23                     694 	inc	hl
      000369 77                     695 	ld	(hl), a
                                    696 ;/tmp/_gbsbuild/src/states/Adventure.c:98: if (player.dir.y < 0) {
      00036A F8 08                  697 	ldhl	sp,	#8
      00036C CB 7E                  698 	bit	7, (hl)
      00036E 28 3A                  699 	jr	Z, 00171$
                                    700 ;/tmp/_gbsbuild/src/states/Adventure.c:99: if (TileAt(tile_x, tile_y) ||     // Left Edge
      000370 23                     701 	inc	hl
      000371 46                     702 	ld	b, (hl)
      000372 C5                     703 	push	bc
      000373 C5                     704 	push	bc
      000374 33                     705 	inc	sp
      000375 23                     706 	inc	hl
      000376 23                     707 	inc	hl
      000377 7E                     708 	ld	a, (hl)
      000378 F5                     709 	push	af
      000379 33                     710 	inc	sp
      00037A CDr00r00               711 	call	_TileAt
      00037D E8 02                  712 	add	sp, #2
      00037F 7B                     713 	ld	a, e
      000380 C1                     714 	pop	bc
      000381 B7                     715 	or	a, a
      000382 20 10                  716 	jr	NZ, 00167$
                                    717 ;/tmp/_gbsbuild/src/states/Adventure.c:100: (TileAt(tile_x + 1, tile_y))  // Right edge
      000384 C5                     718 	push	bc
      000385 33                     719 	inc	sp
      000386 F8 0D                  720 	ldhl	sp,	#13
      000388 7E                     721 	ld	a, (hl)
      000389 F5                     722 	push	af
      00038A 33                     723 	inc	sp
      00038B CDr00r00               724 	call	_TileAt
      00038E E8 02                  725 	add	sp, #2
      000390 7B                     726 	ld	a, e
      000391 B7                     727 	or	a, a
      000392 28 16                  728 	jr	Z, 00171$
      000394                        729 00167$:
                                    730 ;/tmp/_gbsbuild/src/states/Adventure.c:102: player.pos.y = (tile_y + 1 << 3);
      000394 F8 09                  731 	ldhl	sp,	#9
      000396 2A                     732 	ld	a, (hl+)
      000397 66                     733 	ld	h, (hl)
      000398 6F                     734 	ld	l, a
      000399 23                     735 	inc	hl
      00039A 29                     736 	add	hl, hl
      00039B 29                     737 	add	hl, hl
      00039C 29                     738 	add	hl, hl
      00039D 4D                     739 	ld	c, l
      00039E 44                     740 	ld	b, h
      00039F 21r02r00               741 	ld	hl, #(_actors + 0x0002)
      0003A2 79                     742 	ld	a, c
      0003A3 22                     743 	ld	(hl+), a
      0003A4 70                     744 	ld	(hl), b
                                    745 ;/tmp/_gbsbuild/src/states/Adventure.c:103: player.dir.y = 0;
      0003A5 21r06r00               746 	ld	hl, #(_actors + 0x0006)
      0003A8 36 00                  747 	ld	(hl), #0x00
      0003AA                        748 00171$:
                                    749 ;/tmp/_gbsbuild/src/states/Adventure.c:108: if (player.dir.y > 0) {
      0003AA 21r06r00               750 	ld	hl, #(_actors + 0x0006)
      0003AD 4E                     751 	ld	c, (hl)
      0003AE 59                     752 	ld	e, c
      0003AF 16 00                  753 	ld	d, #0x00
      0003B1 AF                     754 	xor	a, a
      0003B2 91                     755 	sub	a, c
      0003B3 CB 7B                  756 	bit	7, e
      0003B5 28 07                  757 	jr	Z, 00428$
      0003B7 CB 7A                  758 	bit	7, d
      0003B9 20 08                  759 	jr	NZ, 00429$
      0003BB BF                     760 	cp	a, a
      0003BC 18 05                  761 	jr	00429$
      0003BE                        762 00428$:
      0003BE CB 7A                  763 	bit	7, d
      0003C0 28 01                  764 	jr	Z, 00429$
      0003C2 37                     765 	scf
      0003C3                        766 00429$:
      0003C3 30 42                  767 	jr	NC, 00176$
                                    768 ;/tmp/_gbsbuild/src/states/Adventure.c:109: if (TileAt(tile_x, tile_y + 1) ||     // Left Edge
      0003C5 F8 09                  769 	ldhl	sp,	#9
      0003C7 46                     770 	ld	b, (hl)
      0003C8 04                     771 	inc	b
      0003C9 C5                     772 	push	bc
      0003CA C5                     773 	push	bc
      0003CB 33                     774 	inc	sp
      0003CC 23                     775 	inc	hl
      0003CD 23                     776 	inc	hl
      0003CE 7E                     777 	ld	a, (hl)
      0003CF F5                     778 	push	af
      0003D0 33                     779 	inc	sp
      0003D1 CDr00r00               780 	call	_TileAt
      0003D4 E8 02                  781 	add	sp, #2
      0003D6 7B                     782 	ld	a, e
      0003D7 C1                     783 	pop	bc
      0003D8 B7                     784 	or	a, a
      0003D9 20 10                  785 	jr	NZ, 00172$
                                    786 ;/tmp/_gbsbuild/src/states/Adventure.c:110: (TileAt(tile_x + 1, tile_y + 1))  // Right edge
      0003DB C5                     787 	push	bc
      0003DC 33                     788 	inc	sp
      0003DD F8 0D                  789 	ldhl	sp,	#13
      0003DF 7E                     790 	ld	a, (hl)
      0003E0 F5                     791 	push	af
      0003E1 33                     792 	inc	sp
      0003E2 CDr00r00               793 	call	_TileAt
      0003E5 E8 02                  794 	add	sp, #2
      0003E7 7B                     795 	ld	a, e
      0003E8 B7                     796 	or	a, a
      0003E9 28 1C                  797 	jr	Z, 00176$
      0003EB                        798 00172$:
                                    799 ;/tmp/_gbsbuild/src/states/Adventure.c:112: player.pos.y = (tile_y << 3);
      0003EB F8 09                  800 	ldhl	sp,#9
      0003ED 2A                     801 	ld	a, (hl+)
      0003EE 4F                     802 	ld	c, a
      0003EF 46                     803 	ld	b, (hl)
      0003F0 CB 21                  804 	sla	c
      0003F2 CB 10                  805 	rl	b
      0003F4 CB 21                  806 	sla	c
      0003F6 CB 10                  807 	rl	b
      0003F8 CB 21                  808 	sla	c
      0003FA CB 10                  809 	rl	b
      0003FC 21r02r00               810 	ld	hl, #(_actors + 0x0002)
      0003FF 79                     811 	ld	a, c
      000400 22                     812 	ld	(hl+), a
      000401 70                     813 	ld	(hl), b
                                    814 ;/tmp/_gbsbuild/src/states/Adventure.c:113: player.dir.y = 0;
      000402 21r06r00               815 	ld	hl, #(_actors + 0x0006)
      000405 36 00                  816 	ld	(hl), #0x00
      000407                        817 00176$:
                                    818 ;/tmp/_gbsbuild/src/states/Adventure.c:117: if (player.moving) {
      000407 FAr07r00               819 	ld	a, (#(_actors + 0x0007) + 0)
      00040A B7                     820 	or	a, a
      00040B 28 60                  821 	jr	Z, 00180$
                                    822 ;/tmp/_gbsbuild/src/states/Adventure.c:64: tile_x = (player.pos.x + 4 + player.dir.x) >> 3;  // Add Left right Bias for Moving=True
      00040D 21r05r00               823 	ld	hl, #(_actors + 0x0005)
      000410 46                     824 	ld	b, (hl)
                                    825 ;/tmp/_gbsbuild/src/states/Adventure.c:118: if (!(player.dir.x > 0 | player.dir.x<0 | player.dir.y> 0 | player.dir.y < 0)) {
      000411 58                     826 	ld	e, b
      000412 16 00                  827 	ld	d, #0x00
      000414 AF                     828 	xor	a, a
      000415 90                     829 	sub	a, b
      000416 CB 7B                  830 	bit	7, e
      000418 28 07                  831 	jr	Z, 00431$
      00041A CB 7A                  832 	bit	7, d
      00041C 20 08                  833 	jr	NZ, 00432$
      00041E BF                     834 	cp	a, a
      00041F 18 05                  835 	jr	00432$
      000421                        836 00431$:
      000421 CB 7A                  837 	bit	7, d
      000423 28 01                  838 	jr	Z, 00432$
      000425 37                     839 	scf
      000426                        840 00432$:
      000426 3E 00                  841 	ld	a, #0x00
      000428 17                     842 	rla
      000429 4F                     843 	ld	c, a
      00042A 78                     844 	ld	a, b
      00042B 07                     845 	rlca
      00042C E6 01                  846 	and	a,#0x01
      00042E B1                     847 	or	a, c
      00042F 4F                     848 	ld	c, a
                                    849 ;/tmp/_gbsbuild/src/states/Adventure.c:62: backup_dir.y = player.dir.y;
      000430 21r06r00               850 	ld	hl, #(_actors + 0x0006)
      000433 46                     851 	ld	b, (hl)
                                    852 ;/tmp/_gbsbuild/src/states/Adventure.c:118: if (!(player.dir.x > 0 | player.dir.x<0 | player.dir.y> 0 | player.dir.y < 0)) {
      000434 58                     853 	ld	e, b
      000435 16 00                  854 	ld	d, #0x00
      000437 AF                     855 	xor	a, a
      000438 90                     856 	sub	a, b
      000439 CB 7B                  857 	bit	7, e
      00043B 28 07                  858 	jr	Z, 00433$
      00043D CB 7A                  859 	bit	7, d
      00043F 20 08                  860 	jr	NZ, 00434$
      000441 BF                     861 	cp	a, a
      000442 18 05                  862 	jr	00434$
      000444                        863 00433$:
      000444 CB 7A                  864 	bit	7, d
      000446 28 01                  865 	jr	Z, 00434$
      000448 37                     866 	scf
      000449                        867 00434$:
      000449 3E 00                  868 	ld	a, #0x00
      00044B 17                     869 	rla
      00044C B1                     870 	or	a, c
      00044D 4F                     871 	ld	c, a
      00044E 78                     872 	ld	a, b
      00044F 07                     873 	rlca
      000450 E6 01                  874 	and	a,#0x01
      000452 B1                     875 	or	a, c
      000453 B7                     876 	or	a, a
      000454 20 17                  877 	jr	NZ, 00180$
                                    878 ;/tmp/_gbsbuild/src/states/Adventure.c:119: player.moving = FALSE;
      000456 21r07r00               879 	ld	hl, #(_actors + 0x0007)
      000459 36 00                  880 	ld	(hl), #0x00
                                    881 ;/tmp/_gbsbuild/src/states/Adventure.c:120: player.dir.x = backup_dir.x;
      00045B F8 04                  882 	ldhl	sp,#4
      00045D 2A                     883 	ld	a, (hl+)
      00045E 5F                     884 	ld	e, a
      00045F 56                     885 	ld	d, (hl)
      000460 1A                     886 	ld	a, (de)
      000461 EAr05r00               887 	ld	(#(_actors + 0x0005)),a
                                    888 ;/tmp/_gbsbuild/src/states/Adventure.c:121: player.dir.y = backup_dir.y;
      000464 F8 06                  889 	ldhl	sp,#6
      000466 2A                     890 	ld	a, (hl+)
      000467 5F                     891 	ld	e, a
      000468 56                     892 	ld	d, (hl)
      000469 1A                     893 	ld	a, (de)
      00046A EAr06r00               894 	ld	(#(_actors + 0x0006)),a
      00046D                        895 00180$:
                                    896 ;/tmp/_gbsbuild/src/states/Adventure.c:125: tile_x = (player.pos.x + 4) >> 3;
      00046D 21r00r00               897 	ld	hl, #_actors
      000470 2A                     898 	ld	a, (hl+)
      000471 4F                     899 	ld	c, a
      000472 46                     900 	ld	b, (hl)
      000473 03                     901 	inc	bc
      000474 03                     902 	inc	bc
      000475 03                     903 	inc	bc
      000476 03                     904 	inc	bc
      000477 CB 28                  905 	sra	b
      000479 CB 19                  906 	rr	c
      00047B CB 28                  907 	sra	b
      00047D CB 19                  908 	rr	c
      00047F CB 28                  909 	sra	b
      000481 CB 19                  910 	rr	c
                                    911 ;/tmp/_gbsbuild/src/states/Adventure.c:126: tile_y = (player.pos.y) >> 3;
      000483 21r02r00               912 	ld	hl, #(_actors + 0x0002)
      000486 2A                     913 	ld	a, (hl+)
      000487 6E                     914 	ld	l, (hl)
      000488 67                     915 	ld	h, a
      000489 CB 2D                  916 	sra	l
      00048B CB 1C                  917 	rr	h
      00048D CB 2D                  918 	sra	l
      00048F CB 1C                  919 	rr	h
      000491 CB 2D                  920 	sra	l
      000493 CB 1C                  921 	rr	h
                                    922 ;/tmp/_gbsbuild/src/states/Adventure.c:129: if (ActivateTriggerAt(tile_x, tile_y, FALSE)) {
      000495 AF                     923 	xor	a, a
      000496 F5                     924 	push	af
      000497 33                     925 	inc	sp
      000498 69                     926 	ld	l, c
      000499 E5                     927 	push	hl
      00049A CDr00r00               928 	call	_ActivateTriggerAt
      00049D E8 03                  929 	add	sp, #3
      00049F 7B                     930 	ld	a, e
      0004A0 B7                     931 	or	a, a
                                    932 ;/tmp/_gbsbuild/src/states/Adventure.c:131: return;
      0004A1 C2r86r05               933 	jp	NZ,00200$
                                    934 ;/tmp/_gbsbuild/src/states/Adventure.c:135: hit_actor = ActorOverlapsPlayer(FALSE);
      0004A4 AF                     935 	xor	a, a
      0004A5 F5                     936 	push	af
      0004A6 33                     937 	inc	sp
      0004A7 CDr00r00               938 	call	_ActorOverlapsPlayer
      0004AA 33                     939 	inc	sp
      0004AB 4B                     940 	ld	c, e
                                    941 ;/tmp/_gbsbuild/src/states/Adventure.c:136: if (hit_actor && hit_actor != NO_ACTOR_COLLISON) {
      0004AC 79                     942 	ld	a, c
      0004AD B7                     943 	or	a, a
      0004AE 28 43                  944 	jr	Z, 00191$
      0004B0 79                     945 	ld	a, c
      0004B1 3C                     946 	inc	a
      0004B2 28 3F                  947 	jr	Z, 00191$
                                    948 ;/tmp/_gbsbuild/src/states/Adventure.c:137: if (hit_actor == ActorInFrontOfPlayer(8, FALSE)) {
      0004B4 C5                     949 	push	bc
      0004B5 AF                     950 	xor	a, a
      0004B6 57                     951 	ld	d,a
      0004B7 1E 08                  952 	ld	e,#0x08
      0004B9 D5                     953 	push	de
      0004BA CDr00r00               954 	call	_ActorInFrontOfPlayer
      0004BD E8 02                  955 	add	sp, #2
      0004BF 7B                     956 	ld	a, e
      0004C0 C1                     957 	pop	bc
      0004C1 91                     958 	sub	a, c
      0004C2 20 05                  959 	jr	NZ, 00184$
                                    960 ;/tmp/_gbsbuild/src/states/Adventure.c:138: player.moving = FALSE;
      0004C4 21r07r00               961 	ld	hl, #(_actors + 0x0007)
      0004C7 36 00                  962 	ld	(hl), #0x00
      0004C9                        963 00184$:
                                    964 ;/tmp/_gbsbuild/src/states/Adventure.c:140: if (player_iframes == 0) {
      0004C9 FAr00r00               965 	ld	a, (#_player_iframes)
                                    966 ;/tmp/_gbsbuild/src/states/Adventure.c:141: if (actors[hit_actor].collision_group) {
      0004CC B7                     967 	or	a,a
      0004CD 20 24                  968 	jr	NZ, 00191$
      0004CF 47                     969 	ld	b,a
      0004D0 69                     970 	ld	l, c
      0004D1 60                     971 	ld	h, b
      0004D2 29                     972 	add	hl, hl
      0004D3 29                     973 	add	hl, hl
      0004D4 09                     974 	add	hl, bc
      0004D5 29                     975 	add	hl, hl
      0004D6 09                     976 	add	hl, bc
      0004D7 29                     977 	add	hl, hl
      0004D8 09                     978 	add	hl, bc
      0004D9 29                     979 	add	hl, hl
      0004DA 11r00r00               980 	ld	de, #_actors
      0004DD 19                     981 	add	hl, de
      0004DE 11 18 00               982 	ld	de, #0x0018
      0004E1 19                     983 	add	hl, de
      0004E2 7E                     984 	ld	a, (hl)
      0004E3 B7                     985 	or	a, a
      0004E4 28 08                  986 	jr	Z, 00186$
                                    987 ;/tmp/_gbsbuild/src/states/Adventure.c:142: player.hit_actor = 0;
      0004E6 21r1Ar00               988 	ld	hl, #_actors + 26
      0004E9 36 00                  989 	ld	(hl), #0x00
                                    990 ;/tmp/_gbsbuild/src/states/Adventure.c:143: player.hit_actor = hit_actor;
      0004EB 71                     991 	ld	(hl), c
      0004EC 18 05                  992 	jr	00191$
      0004EE                        993 00186$:
                                    994 ;/tmp/_gbsbuild/src/states/Adventure.c:145: player_iframes = 10;
      0004EE 21r00r00               995 	ld	hl, #_player_iframes
      0004F1 36 0A                  996 	ld	(hl), #0x0a
      0004F3                        997 00191$:
                                    998 ;/tmp/_gbsbuild/src/states/Adventure.c:151: if (player.moving) {
      0004F3 FAr07r00               999 	ld	a, (#(_actors + 0x0007) + 0)
      0004F6 B7                    1000 	or	a, a
      0004F7 CAr86r05              1001 	jp	Z, 00200$
                                   1002 ;/tmp/_gbsbuild/src/states/Adventure.c:153: if (player.move_speed == 0) {
      0004FA 21r04r00              1003 	ld	hl, #(_actors + 0x0004)
      0004FD 4E                    1004 	ld	c, (hl)
      0004FE 79                    1005 	ld	a, c
      0004FF B7                    1006 	or	a, a
      000500 20 3B                 1007 	jr	NZ, 00196$
                                   1008 ;/tmp/_gbsbuild/src/states/Adventure.c:155: if (IS_FRAME_2) {
      000502 FAr00r00              1009 	ld	a, (#_game_time)
      000505 0F                    1010 	rrca
      000506 DAr86r05              1011 	jp	C,00200$
                                   1012 ;/tmp/_gbsbuild/src/states/Adventure.c:156: player.pos.x += (WORD)player.dir.x;
      000509 21r00r00              1013 	ld	hl, #_actors
      00050C 2A                    1014 	ld	a, (hl+)
      00050D 4F                    1015 	ld	c, a
      00050E 46                    1016 	ld	b, (hl)
      00050F FAr05r00              1017 	ld	a, (#(_actors + 0x0005) + 0)
      000512 5F                    1018 	ld	e, a
      000513 17                    1019 	rla
      000514 9F                    1020 	sbc	a, a
      000515 57                    1021 	ld	d, a
      000516 79                    1022 	ld	a, c
      000517 83                    1023 	add	a, e
      000518 4F                    1024 	ld	c, a
      000519 78                    1025 	ld	a, b
      00051A 8A                    1026 	adc	a, d
      00051B 47                    1027 	ld	b, a
      00051C 21r00r00              1028 	ld	hl, #_actors
      00051F 79                    1029 	ld	a, c
      000520 22                    1030 	ld	(hl+), a
      000521 70                    1031 	ld	(hl), b
                                   1032 ;/tmp/_gbsbuild/src/states/Adventure.c:157: player.pos.y += (WORD)player.dir.y;
      000522 21r02r00              1033 	ld	hl, #(_actors + 0x0002)
      000525 2A                    1034 	ld	a, (hl+)
      000526 4F                    1035 	ld	c, a
      000527 46                    1036 	ld	b, (hl)
      000528 FAr06r00              1037 	ld	a, (#(_actors + 0x0006) + 0)
      00052B 5F                    1038 	ld	e, a
      00052C 17                    1039 	rla
      00052D 9F                    1040 	sbc	a, a
      00052E 57                    1041 	ld	d, a
      00052F 79                    1042 	ld	a, c
      000530 83                    1043 	add	a, e
      000531 4F                    1044 	ld	c, a
      000532 78                    1045 	ld	a, b
      000533 8A                    1046 	adc	a, d
      000534 47                    1047 	ld	b, a
      000535 21r02r00              1048 	ld	hl, #(_actors + 0x0002)
      000538 79                    1049 	ld	a, c
      000539 22                    1050 	ld	(hl+), a
      00053A 70                    1051 	ld	(hl), b
      00053B 18 49                 1052 	jr	00200$
      00053D                       1053 00196$:
                                   1054 ;/tmp/_gbsbuild/src/states/Adventure.c:160: player.pos.x += (WORD)(player.dir.x * player.move_speed);
      00053D 11r00r00              1055 	ld	de, #_actors
      000540 1A                    1056 	ld	a, (de)
      000541 F8 0B                 1057 	ldhl	sp,	#11
      000543 22                    1058 	ld	(hl+), a
      000544 13                    1059 	inc	de
      000545 1A                    1060 	ld	a, (de)
      000546 77                    1061 	ld	(hl), a
      000547 FAr05r00              1062 	ld	a, (#(_actors + 0x0005) + 0)
      00054A 61                    1063 	ld	h, c
      00054B E5                    1064 	push	hl
      00054C 33                    1065 	inc	sp
      00054D F5                    1066 	push	af
      00054E 33                    1067 	inc	sp
      00054F CDr00r00              1068 	call	__muluschar
      000552 E8 02                 1069 	add	sp, #2
                                   1070 ;c
      000554 F8 0B                 1071 	ldhl	sp,	#11
      000556 2A                    1072 	ld	a, (hl+)
      000557 66                    1073 	ld	h, (hl)
      000558 6F                    1074 	ld	l, a
      000559 19                    1075 	add	hl, de
      00055A 4D                    1076 	ld	c, l
      00055B 44                    1077 	ld	b, h
      00055C 21r00r00              1078 	ld	hl, #_actors
      00055F 79                    1079 	ld	a, c
      000560 22                    1080 	ld	(hl+), a
      000561 70                    1081 	ld	(hl), b
                                   1082 ;/tmp/_gbsbuild/src/states/Adventure.c:161: player.pos.y += (WORD)(player.dir.y * player.move_speed);
      000562 21r02r00              1083 	ld	hl, #(_actors + 0x0002)
      000565 2A                    1084 	ld	a, (hl+)
      000566 4F                    1085 	ld	c, a
      000567 46                    1086 	ld	b, (hl)
      000568 FAr06r00              1087 	ld	a, (#(_actors + 0x0006) + 0)
      00056B 21r04r00              1088 	ld	hl, #(_actors + 0x0004)
      00056E 66                    1089 	ld	h, (hl)
      00056F C5                    1090 	push	bc
      000570 E5                    1091 	push	hl
      000571 33                    1092 	inc	sp
      000572 F5                    1093 	push	af
      000573 33                    1094 	inc	sp
      000574 CDr00r00              1095 	call	__muluschar
      000577 E8 02                 1096 	add	sp, #2
      000579 C1                    1097 	pop	bc
      00057A 7B                    1098 	ld	a, e
      00057B 81                    1099 	add	a, c
      00057C 4F                    1100 	ld	c, a
      00057D 7A                    1101 	ld	a, d
      00057E 88                    1102 	adc	a, b
      00057F 47                    1103 	ld	b, a
      000580 21r02r00              1104 	ld	hl, #(_actors + 0x0002)
      000583 79                    1105 	ld	a, c
      000584 22                    1106 	ld	(hl+), a
      000585 70                    1107 	ld	(hl), b
      000586                       1108 00200$:
                                   1109 ;/tmp/_gbsbuild/src/states/Adventure.c:164: }
      000586 E8 0D                 1110 	add	sp, #13
      000588 C9                    1111 	ret
                                   1112 	.area _CODE_5
                                   1113 	.area _CABS (ABS)
